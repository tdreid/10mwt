doctype html
html
  head
    meta(http-equiv="content-type" content="text/html; charset=UTF-8")
    meta(name="robots" content="noindex, nofollow")
    meta(name="googlebot" content="noindex, nofollow")
    script(src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous")
    script(src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous")
    script(type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.1/knockout-min.js")
    script(type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js")
    script(type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.16/clipboard.min.js")
    script(type="text/javascript" src="./js/stopwatch.js")
    script(type="text/javascript" src="./js/app.js")    
    link(rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous")
    link(rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css")
    link(rel="stylesheet" type="text/css" href="./css/style.css")
  body.
    <div id="app" class="container">
    <div class="title"><h2>Timed 10-Meter Walk Test</h2></div>    
    <div class="row">
      <div class="twelve columns">
        <form>
          <input placeholder="Enter patient name or id" data-bind="value: newId,  valueUpdate: &quot;afterkeydown&quot;">
          <button type="submit" class="btn-subtle" data-bind="click:addTest">
            Add Test
          </button>
        </form>
      </div>
      <div class="twelve columns">
        <ul class="fa-ul" data-bind="foreach: tests">
          <li>
            <i class="fa-li fa fa-caret-right"></i>
            <span class="text-id" data-bind="text: id"> </span>
            [<input type="checkbox" data-bind="checked: isFast"> Check if patient prompted to walk as fast as possible.]
            <ol data-bind="foreach: trials">
              <li>
                <div>
                  <em>t</em><sub>2m</sub>
                  <input size="3" class="text-timer" data-bind="value: s"> s <em>t</em><sub>8m</sub>
                  <input size="3" class="text-timer" data-bind="value: s2"> s
                  <div>
                    <span data-bind="if: state() < 3"><button class="btn-subtle" data-bind="click: nextState, text: stateLabel">Start Timer</button></span>
                  </div>                
                  <ul data-bind="if: timeToAmbulate" class="fa-ul">
                    <li><i class="fa-li fa fa-clock-o"></i>
                      <span><span data-bind="text: timeToAmbulate"> </span> s to ambulate 6 m</span>
                    </li>
                  </ul>
                </div>
              </li>
          </ol>
          </li>
          <div data-bind="if: isReady">Average time to ambulate 6 m: <span data-bind="text: averageTimeToAmbulate"> </span> s</div>
          <div data-bind="if: isReady" class="text-narrative">When assessed with the 10-meter walk test, <span data-bind="text: id">the patient</span> had a <span data-bind="text: gaitText"> </span> walking speed of <span data-bind="text: averageGaitSpeed"> </span> m/s today.
          <div><button class="button-primary" data-bind="attr:{'data-clipboard-text': 'When assessed with the 10-meter walk test, ' + id() + ' had a ' + gaitText() + ' walking speed of ' + averageGaitSpeed() + ' m/s today.'}"><i class="fa fa-clipboard fa-lg"></i> Copy Narrative</button></div>
          </div>
        </ul>
      </div>
    </div>
    <div class="text-fineprint"><input type="checkbox" data-bind="checked: displayJSON">Show JSON</div>
  </div>
  <div id="snackbar" data-bind="visible: $root.showMessage"><span data-bind="text: $root.showMessage"></span></div>
  <!----------------------------------->
  <div id="debug" data-bind="if: displayJSON" class="container">
    <div class="row">
      <div class="twelve columns">
        <textarea id="viewmodel-json" name="debug" data-bind="value: ko.toJSON($root)"></textarea>
      </div>
    </div>
  </div>
